<html>
<head>
<title>
CokeScript language, whitespace sensitive language that compile to JavaScript
</title>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="main.css">
</head>
<body>

<div class="jumbotron">
      <div class="container">
        <h1>CokeScript</h1>
        <p>Because Coffee is not enough, and I like the smell of it.</p>
      </div>
    </div>


<p>CokeScript is a whitespace sensitive language that compile to JavaScript. CokeScript doesn't try to be too smart and is mainly syntactic sugar around common JavasScript annoyances. Features:</p>

<ol>
<li>Significant whitespace</li>
<li>String interpolation</li>
<li>Multiline strings</li>
<li>Shorter function declaration and lambda expression</li>
<li>Function parameters can have a default and computed value</li>
<li>Simple <strong>for</strong> loop syntax that works on Array or Object</li>
<li>Sensible scoping rules unlike <a href="https://donatstudios.com/CoffeeScript-Madness">CoffeeScript</a></li>
<li>Classes with "classical" inheritance</li>
<li>Opiniated syntax rules that enfore a rigid coding style</li>
<li>A quite good grammar parser that hints about what is wrong</li>
</ol>

<p>More info on the github page <a href="https://github.com/batiste/CokeScript/">https://github.com/batiste/CokeScript/</a></p>

<div style="clear:both" id="egClass">
<div class="col">
<h2>Classes</h2>
<textarea class="in">
class Animal
  
  def constructor(name="unknown", diet="grass")
    this.name = name
    this.diet = diet
  
  def eat()
    return "{this.name} eat {this.diet}"

class Cats(Animal)
  def constructor(name)
    Animal.call(this, name, "meat")

class Tiger(Cats)
  def constructor(name)
    Cats.call(this, name)

tiger = Tiger("Wilson")
tiger.eat()
</textarea>

<pre class="error alert alert-danger" style=""></pre>

</div>

<div class="col">
  <h2>JavaScript Output</h2>
  <textarea class="code"></textarea>
  <button class="evalButton btn btn-default">Eval</button>
  <pre class="evalResult"></pre>
</div>

</div>




<div style="clear:both" id="egScope">
<div class="col">
<h2>Scope</h2>
<textarea class="in">
a = "string 
on multiple 
lines"

c = 1 + 1

def testScope(b)
  a = "does not erase the outer scope string"
  b = "No var here because it's parameter of the function"
  c := "Explicit assignment to parent scope variable with \":=\""
  return a

testScope()
"{a} , {c}"
</textarea>

<pre class="error" style=""></pre>

</div>


<div class="col">
  <h2>JavaScript Output</h2>
  <textarea class="code"></textarea>
  <button class="evalButton btn btn-default">Eval</button>
  <pre class="evalResult"></pre>
</div>

</div>




<div style="clear:both" id="egFunction">
<div class="col">
<h2>Functions and Loops</h2>
<textarea class="in">
memo = {}

def fib(n)
    if memo[n]
      return memo[n]
    if n < 2
        return n
    memo[n] = fib(n - 2) + fib(n - 1)
    return memo[n]

array = [1, 2, 3]
fibo_square = array.map(def(i) fib(i * i))

out = ""
for key, value in memo
   out += "{key}: {value}, "

out
</textarea>

<pre class="error" style=""></pre>

</div>


<div class="col">
  <h2>JavaScript Output</h2>
  <textarea class="code"></textarea>
  <button class="evalButton btn btn-default">Eval</button>
  <pre class="evalResult"></pre>
</div>

</div>

<script src='dist/cokescript.js'></script>
<script>

window.onload = function() {

function initExample(dom) {
  function dGet(cls){ return dom.getElementsByClassName(cls)[0]; }
  var din = dGet('in');
  //var dout = dGet('out');
  var code = dGet('code');

  dGet('evalButton').onclick = function() {
    var result = eval(code.value);
    dGet('evalResult').textContent = result;
  };

  din.onkeyup = function() {
    outit();
  };

  function outit() {
    try {
      var result = cokescript.generateModule(din.value);
      code.value = result.code;
      //dout.value = JSON.stringify(result.ast, false, 2);
      dGet("error").textContent = "";
    } catch(e) {
      dGet("error").textContent = String(e);
      throw e;
    }
  }

  outit();
}

initExample(document.getElementById('egClass'));
initExample(document.getElementById('egFunction'));
initExample(document.getElementById('egScope'));


};

</script>